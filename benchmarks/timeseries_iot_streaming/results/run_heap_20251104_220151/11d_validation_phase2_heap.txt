Timing is on.
====================================================
Streaming Benchmark - Phase 11d: Result Validation
====================================================

Gate 1: Row Count Consistency
==============================

psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:  Row counts:
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:    AO: 36640000
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:    AOCO: 36640000
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:    PAX: 36640000
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:    PAX-no-cluster: 36640000
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:    HEAP: 36640000
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:50: NOTICE:  ✅ PASSED: All variants have identical row counts (36640000 rows)
DO
Time: 7532.956 ms (00:07.533)

Gate 2: PAX Configuration Bloat Check
=====================================

psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:  Storage sizes:
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:    AOCO (baseline): 6833 MB
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:    PAX-no-cluster: 3760 MB (0.55x vs AOCO)
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:    PAX-clustered: 3827 MB (1.02x vs no-cluster)
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:  ✅ PASSED: PAX-no-cluster bloat is healthy (<20% overhead)
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:101: NOTICE:  ✅ PASSED: PAX-clustered overhead is acceptable (<40%)
DO
Time: 10.123 ms

Gate 3: INSERT Throughput Sanity Check
=======================================

psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:  Using Phase 1 metrics from PRODUCTION run
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:  Phase 1 (no indexes) throughput:
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:    AO: 281047 rows/sec
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:    PAX: 250812 rows/sec
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:    Ratio: PAX is %89.2 of AO speed
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:157: NOTICE:  ✅ PASSED: PAX INSERT speed is acceptable (>50% of AO)
DO
Time: 18.713 ms

Gate 4: Bloom Filter Effectiveness
===================================

psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:  Bloom filter column cardinalities (Nov 2025 optimized config):
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:    caller_number: 1883720 distinct values
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:    callee_number: 1725950 distinct values
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:    (call_id removed - only 1 distinct value)
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:196: NOTICE:  ✅ PASSED: All bloom filter columns have high cardinality (>1000 unique)
DO
Time: 10.016 ms

Gate 5: HEAP Bloat Analysis (Academic)
======================================

⚠️  This gate is for academic demonstration only
⚠️  HEAP bloat is EXPECTED and demonstrates why AO/AOCO/PAX exist

psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:  HEAP vs AO comparison:
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:    HEAP size: 8484 MB
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:    AO size: 7441 MB
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:    HEAP bloat ratio: 1.14x
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:  ⚠️  UNEXPECTED: HEAP has minimal bloat (<14.0)
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:      This suggests limited UPDATE/DELETE activity or recent VACUUM
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:  missing error text
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:  Key Learning: Append-only storage (AO/AOCO/PAX) avoids this bloat
psql:/home/cbadmin/bom-parts/pax_benchmark/benchmarks/timeseries_iot_streaming/sql/11d_validate_results_HEAP.sql:246: NOTICE:                by never updating rows in-place
DO
Time: 6.173 ms

====================================================
VALIDATION SUMMARY
====================================================

All validation gates:;
  1. Row count consistency: Check above;
  2. PAX configuration bloat: Check above;
  3. INSERT throughput sanity: Check above;
  4. Bloom filter effectiveness: Check above;
  5. HEAP bloat analysis: Check above (academic demonstration);

If all gates passed: ✅ Benchmark results are valid!;
If any gates failed: ❌ Review configuration and re-run;

⚠️  HEAP bloat is EXPECTED - this demonstrates append-only benefits;

====================================================
Benchmark complete (WITH HEAP academic variant)!
====================================================
